<link rel="stylesheet" href=".\styles-updated.css">
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<div class="row" id="toprow">
<div id="Miranda-div" class="toprow col2">
	<img class="door" src="doors/IMG_5244.PNG">
	<div id="portrait-wrapper"><img id="portrait" src="content/self-portrait-cropped.png"></div>
</div>
<div id="AboutContact-div" class="toprow col1">
	<img class="door" src="doors/IMG_5245.PNG">
	<h1 id="bio-header" class="behind-text">Bio</h1>
	<div id="biooverlay" class="overlay bioclosed">
	</div>
</div>
<div class="toprow closed col3" id="media" onclick="changeDoorState('media')">
	<img id="media-door" class="door" src="doors/IMG_5246.PNG">
	<h1 class="behind-text">Media</h1>
	<div id="mediaoverlay" class="overlay closed">
	</div>
</div>
</div>
<div class="row" id="bottomrow">
<div id="bottomrow-div">
	<div class="bottomrow closed col1" id="film" onclick="changeDoorState('film')">
		<img id="film-door" class="door" src="doors/IMG_5242.PNG">
		<h1 class="behind-text">Film</h1>
		<div id="filmoverlay" class="overlay closed">
		</div>
	</div>
	<div class="bottomrow closed col3" id="art" onclick="changeDoorState('art')">
		<img id="art-door" class="door" src="doors/IMG_5241.PNG">
		<h1 class="behind-text">Art</h1>
		<div id="artoverlay" class="overlay closed">
		</div>
	</div>
	<div class="bottomrow closed col2" id="comedy" onclick="changeDoorState('comedy')">
		<img id="comedy-door" class="door" src="doors/IMG_5243.PNG">
		<h1 class="behind-text">Comedy</h1>
		<div id="comedyoverlay" class="overlay closed">
		</div>
	</div>
</div>
</div>
<script>
	window.onload = function() {
	// First we get the viewport height and we multiple it by 1% to get a value for a vh unit
	//let vh = document.documentElement.clientHeight * 0.01;
	// Then we set the value in the --vh custom property to the root of the document
	//document.documentElement.style.setProperty('--vh', `${vh}px`);
	mobileBrowser = isMobile();
	console.log("browser is mobile: " + mobileBrowser);
	if (!mobileBrowser) {
		console.log("adding hover");
		addHover();
	}

	var depeek_time = 1400;
	  //miranda peekout
	  setTimeout(() => {switchClass('portrait-wrapper', 'peek')}, 300);
	  setTimeout(() => {switchClass('Miranda-div', 'peek')}, 300);
	  setTimeout(() => {switchClassTwo('portrait-wrapper', 'peek', 'depeek')}, depeek_time);
	  setTimeout(() => {switchClassTwo('Miranda-div', 'peek', 'depeek')}, depeek_time);
	  setTimeout(() => {switchClass('portrait-wrapper', 'depeek')}, 1600);
	  setTimeout(() => {switchClass('Miranda-div', 'depeek')}, 1600);
	};

	let resizeTimer;
	window.addEventListener("resize", () => {
	  document.body.classList.add("resize-animation-stopper");
	  clearTimeout(resizeTimer);
	  resizeTimer = setTimeout(() => {
	    document.body.classList.remove("resize-animation-stopper");
	  }, 400);
	});

	mobileStates = ["closed", "ajar", "open"];


	function addHover() {
		var divs = {
			'Miranda-div': document.getElementById('Miranda-div'),
			'AboutContact-div': document.getElementById('AboutContact-div'),
			'media': document.getElementById('media'),
			'film': document.getElementById('film'),
			'art': document.getElementById('art'),
			'comedy': document.getElementById('comedy')
		};
		for (div in divs) {
			divs[div].className = divs[div].className + " " + "hover";
		}
	};

	function changeDoorState(category) {
		var cat_div = document.getElementById(category);

		console.log(cat_div);
		console.log(cat_div.className);

		if (mobileBrowser) {
			if (cat_div.className.indexOf("closed") >= 0) {
				cat_div.className = cat_div.className.replace("closed", "ajar");
			} else if (cat_div.className.indexOf("ajar") >= 0) {
				cat_div.className = cat_div.className.replace("ajar", "open");
			} else if (cat_div.className.indexOf("open") >= 0) {
				cat_div.className = cat_div.className.replace("open", "closed");
			}

		} else {
			if (cat_div.className.indexOf("closed") >= 0) {
				console.log("changed to open");
				console.log(cat_div.className.indexOf("closed"));
				cat_div.className = cat_div.className.replace("closed", "open");
			} else {
				console.log("changed to closed");
				cat_div.className = cat_div.className.replace("open", "closed");
			}
		}

	};

	function switchClass(element, classAdd) {
		var el = document.getElementById(element);
		console.log(el);
		if (el.className.indexOf(classAdd) >= 0) {
			el.className = el.className.replace(classAdd, '');
		} else {
			el.className = el.className + " " + classAdd;
		}
	};

	function switchClassTwo(element, classRegName, classActivatedName) {
		function internal(element, classRegName, classActivatedName) {
			var el = document.getElementById(element);
			if (el.className.indexOf(classRegName) >= 0) {
				el.className = el.className.replace(classRegName, classActivatedName);
			} else {
				el.className = el.className.replace(classActivatedName, classRegName);
			}
		};

		if (element.forEach !== undefined) {
			element.forEach((el) => {internal(el, classRegName, classActivatedName);});
		} else {
			internal(element, classRegName, classActivatedName);
		}
	};

	function isMobile() {
	  try{ document.createEvent("TouchEvent"); return true; }
	  catch(e){ return false; }
	}
</script>